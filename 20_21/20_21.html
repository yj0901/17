<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">    
    <title>IFE ECMAScript</title>
    <style>
        .palette {
            margin: 0;
            padding: 0;
            list-style: none;
        }
        .palette li {
            width: 40px;
            height: 40px;
            border: 1px solid #000;
            cursor: pointer;
        }
    </style>
</head>
<body>            
    <ul class="palette">
        <li style="background-color:crimson"></li>
        <li style="background-color:bisque"></li>
        <li style="background-color:blueviolet"></li>
        <li style="background-color:coral"></li>
        <li style="background-color:chartreuse"></li>
        <li style="background-color:darkolivegreen"></li>
        <li style="background-color:cyan"></li>
        <li style="background-color:#194738"></li>        
    </ul>

    <p class="color-picker"></p>
<div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
<button id="fade-btn">淡出</button>
<div id="fade1-obj" style="width:300px;height:300px;background:#000"></div>
<button id="fade1-btn">淡出</button>
    <script>
    //settimeout

        var fade=document.querySelector('#fade-obj');
        var btn=document.querySelector('#fade-btn');
   var o=1;
     function chu() {       
 if(o>0){
    o-=0.1;
    fade.style.opacity=o;     
setTimeout("chu()",100);
}else{clearTimeot(t);
}
 } 
    function ru() {      
 if(o<1){
    fade.style.opacity=o; 
     o+=0.1;
setTimeout("ru()",100);
}else{
clearTimeot(t);
}
}     
btn.onclick=function(){
if(btn.innerText=='淡出'){
chu();
btn.innerText="淡入";
}else if(btn.innerText=='淡入'){
     var o=0.1;
    ru();
    btn.innerText="淡出";}
        }



//setinterval
         var fade1=document.querySelector('#fade1-obj');
        var btn1=document.querySelector('#fade1-btn');
  function chu1() {       
 if(o>0){
    o-=0.1;
    fade1.style.opacity=o;     
}else{
   clearInterval(t);
}
 } 
    function ru1() {      
 if(o<=1){
    fade1.style.opacity=o; 
     o+=0.1;
}else{
clearInterval(t1);
}
}     
   btn1.onclick=function(){
if(btn1.innerText=='淡出'){
t=setInterval('chu1()',100);

btn1.innerText="淡入";
}else if(btn1.innerText=='淡入'){
     var o=0.1;
    t1=setInterval('ru1()',100);
    btn1.innerText="淡出";}
        }
 // var EventUtil = {
 //     addHandler: function (element, type, handler) {
 //        if (element.addEventListener) {
 //             element.addEventListener(type, handler, false);
 //        } else if (element.attachEvent) {
 //             element.attachEvent(on + type, handler);
 //         } else {
 //            element['on' + type] = handler;
 //        }
 //     },

 //     getEvent: function (event) {
 //         return event ? event : window.event;
 
 //     },
 
 //    getTarget: function (event) {
 //         return event.target || event.srcElement;
 //     },
 
 //     preventDefault: function (event) {
 //         if (event.preventDefault) {
 //             event.preventDefault();
 //         } else {
 //            event.returnValue = false;
 //        }
 //     },
 
 //     stopPropagation: function (event) {
 //         if (event.stopPropagation) {
 //             event.stopPropagation();
 //        } else {
 //            event.cancelBubble = true;
 //         }
 //     },
 
 //     removeHandler: function (element, type, handler) {
 //        if (element.removeEventListener) {
 //             element.removeEventListener(type, handler, false);
 //         } else if (element.detachEvent) {
 //             element.detachEvent(on + type, handler);
 //        } else {
 //             element['on' + type] = null;
 //         }
 //     }
    
 // };
// var list = document.querySelectorAll("li");
//         for (var i = i = 0, len = list.length; i < len; i++) {
//             list[i].onclick = function(e) {
//                 var t = e.target;
//                 var c = t.style.backgroundColor;
//                 var p = document.getElementsByClassName("color-picker")[0]
//                 p.innerHTML = c;
//                 p.style.color = c;

//             }
//         }
  
  var ul = document.querySelector(".palette");
  ul.onclick = function(e) {
                var t = e.target;
                var c = t.style.backgroundColor;
                var p = document.getElementsByClassName("color-picker")[0]
                p.innerHTML = c;
                p.style.color = c;

            }
 
    </script>
</body>
</html>